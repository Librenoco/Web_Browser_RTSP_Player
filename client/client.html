<!DOCTYPE html>
<script language="JavaScript">
  let socket = new WebSocket("ws://127.0.0.1:25566/");

  let pos = 0;
  let frameForVideo = 0;
  socket.binaryType = "arraybuffer";

  function removeFromString(str, index, number) {
    var outputStringArray = str.split('');
    outputStringArray.splice(index, number);
    return outputStringArray.join('');
  }

  socket.onopen = function (e) {
    alert("[open] Соединение установлено");
  };

  socket.onmessage = function (event) {
    frameForVideo = event.data.split(' ', 1)
    switch (frameForVideo[0]) {
      case '0':
        document.getElementById("ItemPreview").src = "data:image/jpeg;base64," + removeFromString(event.data, 0, event.data.indexOf(' ', pos));
        break;

      case '1':
        document.getElementById("ItemPreview1").src = "data:image/jpeg;base64," + removeFromString(event.data, 0, event.data.indexOf(' ', pos));
        break;
      case '2':
        document.getElementById("ItemPreview2").src = "data:image/jpeg;base64," + removeFromString(event.data, 0, event.data.indexOf(' ', pos));
        break;

      case '3':
        document.getElementById("ItemPreview3").src = "data:image/jpeg;base64," + removeFromString(event.data, 0, event.data.indexOf(' ', pos));
        break;
      case '4':
        document.getElementById("ItemPreview4").src = "data:image/jpeg;base64," + removeFromString(event.data, 0, event.data.indexOf(' ', pos));
        break;

      case '5':
        document.getElementById("ItemPreview5").src = "data:image/jpeg;base64," + removeFromString(event.data, 0, event.data.indexOf(' ', pos));
        break;
      case '6':
        document.getElementById("ItemPreview6").src = "data:image/jpeg;base64," + removeFromString(event.data, 0, event.data.indexOf(' ', pos));
        break;

      case '7':
        document.getElementById("ItemPreview7").src = "data:image/jpeg;base64," + removeFromString(event.data, 0, event.data.indexOf(' ', pos));
        break;
      case '8':
        document.getElementById("ItemPreview8").src = "data:image/jpeg;base64," + removeFromString(event.data, 0, event.data.indexOf(' ', pos));
        break;

      case '9':
        document.getElementById("ItemPreview9").src = "data:image/jpeg;base64," + removeFromString(event.data, 0, event.data.indexOf(' ', pos));
        break;
      case '10':
        document.getElementById("ItemPreview10").src = "data:image/jpeg;base64," + removeFromString(event.data, 0, event.data.indexOf(' ', pos));
        break;

      case '11':
        document.getElementById("ItemPreview11").src = "data:image/jpeg;base64," + removeFromString(event.data, 0, event.data.indexOf(' ', pos));
        break;

      default:
        break;
    }
  };

  socket.onclose = function (event) {
    if (event.wasClean) {
      alert(`[close] Соединение закрыто чисто, код=${event.code} причина=${event.reason}`);
    } else {
      alert('[close] Соединение прервано');
    }
  };

  socket.onerror = function (error) {
    alert(`[error] ${error.message}`);
  };
</script>

<html lang="ru">

<head>
  <meta charset="UTF-8">
</head>

<body>
  <img id="ItemPreview" src="" style="border:5px solid black" />
  <img id="ItemPreview1" src="" style="border:5px solid rgb(236, 3, 3)" />
  <img id="ItemPreview2" src="" style="border:5px solid rgb(197, 3, 236)" />
  <img id="ItemPreview3" src="" style="border:5px solid rgb(133, 11, 204)" />
  <img id="ItemPreview4" src="" style="border:5px solid rgb(57, 2, 255)" />
  <img id="ItemPreview5" src="" style="border:5px solid rgb(31, 241, 224)" />
  <img id="ItemPreview6" src="" style="border:5px solid rgb(31, 59, 134)" />
  <img id="ItemPreview7" src="" style="border:5px solid rgb(209, 164, 17)" />
  <img id="ItemPreview8" src="" style="border:5px solid rgb(25, 43, 92)" />
  <img id="ItemPreview9" src="" style="border:5px solid rgba(30, 112, 34, 0.24)" />
  <img id="ItemPreview10" src="" style="border:5px solid rgb(12, 1, 15)" />
  <img id="ItemPreview11" src="" style="border:5px solid rgb(123, 7, 190)" />
  <img id="ItemPreview12" src="" style="border:5px solid rgb(170, 105, 207)" />
</body>

</html>